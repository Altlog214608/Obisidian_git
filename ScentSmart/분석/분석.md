다음은 `ScentSmart.py`를 중심으로 한 디지털 향기 검사 소프트웨어의 **전체 흐름 구조도**를 **Markdown 다이어그램** 형식으로 시각화한 것입니다.

---

## 🧭 전체 소프트웨어 흐름도 (UI 기준)

```mermaid
graph TD
    A[앱 실행] --> B[UiDlg 생성 (__init__)]
    B --> C[시리얼 통신 초기화<br>setSerialReadThread()]
    B --> D[설정파일 로딩<br>loadSettingsFile()]
    B --> E[UI 초기화<br>uiDlgInit()]

    E --> E1[각 UI 로드 (uiLoader)]
    E1 --> E2[메인화면 ui_main_dlg]
    E1 --> E3[로그인 화면 ui_dlg_login]
    E1 --> E4[피험자 정보 ui_subject_dlg]
    E1 --> E5[메뉴 화면 ui_menu_dlg]
    E1 --> E6[각종 검사 및 훈련 UI]
    E1 --> E7[결과창/설정창/사운드/그래프 등 위젯]

    E --> F[타이머 시작 (1초 간격)<br>uiDlgTimer()]
    E --> G[DB 테이블 생성<br>uiDlgDB()]

    E --> H[메인화면 표시<br>uiDlgStart()]

    H --> I[메뉴화면 전환<br>uiMainBtnLogin()]
    I --> J[검사/훈련 선택: 메뉴화면 ui_menu_dlg]

    J --> K1[후각 역치 검사<br>uiMenuBtnTestThreshold()]
    J --> K2[후각 식별 검사<br>uiMenuBtnTestDiscrimination()]
    J --> K3[후각 인지 검사<br>uiMenuBtnTestIdentification()]
    J --> K4[훈련 - 단일 향 선택<br>uiMenuBtnTrainST()]
    J --> K5[훈련 - 시나리오 구성<br>uiMenuBtnTrainID()]
    J --> K6[프로토콜 통신 화면<br>uiMenuBtnTest()]
    J --> K7[설정 화면<br>uiMenuBtnSettings()]
    J --> K8[종합 결과 보기<br>uiMenuBtnTestResults()]

    %% 검사 흐름 예시 - 역치
    K1 --> L1[역치 가이드 → 준비 → 진행 → 응답 → 결과 저장]

    %% 훈련 흐름 예시
    K4 --> L2[향기 선택 → 발향 진행 → 만족도 평가 → 저장]

    %% 프로토콜 제어 흐름
    K6 --> L3[발향, 세정, 정지, 온도/압력 측정]

    %% 설정 저장
    K7 --> L4[슬라이더 및 체크박스 → 설정 저장]

    %% 결과 보기
    K8 --> L5[TH, DC, ID 결과 시각화 및 TDI 계산]
```

---

## 🧩 흐름 요약

|구분|주요 내용|
|---|---|
|초기화|시리얼 설정, UI 로딩, 설정 로딩, DB 생성, 메인 실행|
|메뉴|로그인 후 검사/훈련 선택|
|검사|역치(Threshold), 식별(Discrimination), 인지(Identification) 진행|
|훈련|단일 향(ST) or 시나리오 기반(ID) 구성|
|사운드|각 단계별 안내 음성 출력 (`dsSound.playGuideSound`)|
|결과|표/차트 시각화, 평가 저장, PDF 저장 등|
|통신|Modbus 기반 시리얼 통신 (`dsComm.sendMsg...`)|
|설정|향기 강도, 지속 시간, 음성 여부 등 조절 가능|

---

원하시면 위 구조를 PDF 또는 PNG로도 제공 가능하고, 특정 부분(예: "역치 검사만 따로 상세 흐름", "시리얼 메시지 흐름")만 별도 도식화해드릴 수 있어요. 다음으로 어떤 부분을 더 깊게 보고 싶으신가요?