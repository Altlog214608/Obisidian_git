# ✅ PWM 주파수 정리 – ScentSmart 하드웨어 기준

## 🔍 PWM이란?

**PWM(Pulse Width Modulation)**: 디지털 ON/OFF 신호로 아날로그 출력을 제어하는 대표 기술

- 모터, 펌프, LED 밝기, 히터, 밸브 등에서 널리 사용
- ScentSmart에서는 펌프 세기, 향 분사 주기 등을 제어하는 데 활용

---

## ⚙️ 동작 원리

### ▶ PWM 구성 요소

| 항목          | 설명 |
|---------------|------|
| **주파수 (Hz)** | 1초 동안 몇 번의 펄스를 반복하는가 |
| **Duty Cycle (%)** | ON 시간 비율 (ex: 25%) |

### ▶ 수식 예시

```text
주기(T) = 1 / 주파수
예: 400Hz → T = 2.5ms (1초 동안 400번 ON/OFF)
```

- Duty Cycle 50% = 펌프 절반 시간 ON
- 높은 주파수일수록 부드러운 동작 (깜빡임, 진동 최소화)

---

## 🧠 PWM 주파수의 의미 (ScentSmart 기준)

- `requestFrequency(400)` → 400Hz로 펌프 주파수 설정
- 내부적으로 4212번 레지스터에 값을 쓰고, 하드웨어 제어
- 펌프/모터의 반응성과 부드러움을 제어

---

## 💡 실제 주파수별 용도 예시

| 주파수(Hz)     | 용도 |
|----------------|------|
| 1 ~ 10         | 느린 점멸, 저속 펌프 |
| 100 ~ 1000     | 대부분의 모터/펌프 제어 |
| 5000 이상      | 고속 정밀 제어 (소음 최소화) |

---

## 🛠 코드 내 흐름

```python
def requestFrequency(self, frequency):
    dsComm.sendMsgWriteSingleRegister(id=1, func=6, address=4212, data_command=frequency)
```

- `4212`번 레지스터는 PWM 제어용
- MODBUS 프로토콜 기반 단일 레지스터 쓰기 명령

---

## ✅ 요약

| 항목     | 설명 |
|----------|------|
| 정의     | PWM = 펄스 폭으로 출력 조절 |
| 사용     | 디지털로 아날로그 제어 (펌프 등) |
| 주파수 의미 | 1초에 몇 번 펄스를 반복할지 |
| 코드 활용 | `requestFrequency()` 통해 설정 |
| 중요성   | 펌프의 동작 품질, 반응속도, 진동/소음 제어 가능 |

---

> ✅ **결론**: PWM 주파수는 하드웨어 동작의 품질을 좌우하는 디지털 제어의 핵심 수치이며, ScentSmart에서는 펌프/밸브의 구동 품질과 직결됩니다.
