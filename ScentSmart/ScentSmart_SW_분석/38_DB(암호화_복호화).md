

---

## ✅ 암호화와 복호화 함수 분류 및 이유

### 🔒 암호화만 수행하는 함수들

|사용 함수|호출 위치|대상 필드|이유|
|---|---|---|---|
|`encryptMessage()`|`insertTableSubject()``insertTableTestID()``checkTableSuject()` 등|이름, 생년월일, 성별|**DB에 저장할 때** 개인정보 보호를 위해 암호화|
|`encryptMessage()`|`selectTableTestIDKeywords()` 등|검색 키워드|**암호화된 값과 비교**해야 하므로, 검색어도 암호화|

> 🔸 **암호화만 수행**하는 이유:  
> → 해당 시점에서는 오직 **DB에 저장하거나, DB에 있는 암호문과 비교**하는 게 목적이라 복호화할 필요가 없음.

---

### 🔓 복호화만 수행하는 함수들

|사용 함수|호출 위치|대상 필드|이유|
|---|---|---|---|
|`decryptMessage()`|`selectTableSubject()``selectTableTestID()``selectTableSubjectByName()``selectTableTestIDOne()` 등|이름, 생년월일, 성별|**DB에서 꺼낸 암호문을 사용자에게 보여주기 위해 복호화**|

> 🔸 **복호화만 수행**하는 이유:  
> → 이 단계에서는 **이미 암호화된 데이터를 읽어왔고**,  
> 사용자에게 보여줄 때는 평문이 필요하므로 **복호화만 수행**함.

---

## 🧠 왜 암·복호화를 분리해서 처리할까?

### 보안 + 성능 + 일관성 때문이야:

|이유|설명|
|---|---|
|🔐 보안성|저장은 반드시 암호화 / 읽을 때만 복호화로 구분함으로써 노출 최소화|
|⚡ 성능|복호화는 문자열 길이와 CPU 사용량이 크기 때문에 **꼭 필요할 때만 수행**|
|🧩 설계 일관성|"쓰기 전에 무조건 암호화, 읽고 나서만 복호화"라는 명확한 규칙 유지|

---

## ✅ 예시 흐름 요약

1. 사용자가 입력 → `insertTableSubject()` 호출  
    → `encryptMessage()` 사용 → DB에 암호화된 이름/생년월일 저장
    
2. UI에서 데이터 조회 → `selectTableSubject()` 호출  
    → `decryptMessage()` 사용 → 사용자에게 평문으로 표시
    
3. 검색 기능 → `selectTableSubjectByName("홍길동")` 호출  
    → 입력값 `"홍길동"`을 `encryptMessage()`로 암호화해서  
    → DB의 암호화된 필드와 **그대로 비교**
    

---

## 📌 결론 요약

|함수 용도|암호화|복호화|
|---|---|---|
|DB 저장|✅ 필요|❌ 불필요|
|DB 검색 조건 비교|✅ 필요|❌ 불필요|
|사용자에게 보여줄 때|❌ 불필요|✅ 필요|

---