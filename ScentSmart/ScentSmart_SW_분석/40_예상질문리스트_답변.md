

# ScentSmart SW & 코드 분석 자기점검 질문리스트 (구조별/심화)

## 1. **시스템 전체 구조와 주요 흐름**

- **프로그램 시작부터 종료까지 전체적인 실행 흐름(메인 UI → 사용자 → 각종 검사 → 결과 표시/저장)은 어떻게 되는가?**
- ```text
    프로그램이 시작되면, dlg_start함수가 실행되면서 시리얼 통신 설정과 각종 UI들을 uiloader로 불러옴과 동시에 각각의 ui에 있는 라벨 또는 버튼과 같은 위젯들에 동적으로 함수를 connect로 연결과 각종 변수 데이터들을 초기화 합니다. 사용자는 시작 버튼을 누르게 되면 DB에 저장되어있는 피검자들의 정보가 나오는 ui를 볼 수 있고, 피검자 추가,삭제,수정 또는 결과 내역을 확인할 수 있고, 피검자 선택 후에 다음으로 넘어가게 되면 바로 검사를 시작할 수 있는 메뉴화면으로 들어가게 됩니다. 메뉴 화면에는 총 3종류의 검사가 있지만, 현재는 인지검사만 활성화 된 상태입니다. 검사가 시작되면 문항 수맞게 자동으로 발향과 세정이 시작되며 문항 번호, 검사 종류에 맞는 선택지 이미지 버튼을 불러오고 프로그래스 바 가 끝나기 전까지는 버튼을 숨겨놓고, 시간이 지나면 다시 버튼이 활성화 되게 동적으로 사용자의 행동을 제한할 수 있고, 재시도 또는 뒤로가기 버튼을 누르면 다시 메뉴화면으로 가거나 같은 문항을 재시도 할 수 있습니다. 12문항 검사가 끝나면 검사 결과에 대한 내용을 차트로 나타내고, 엑셀파일로 저장할 수 있으며 DB에 자동으로 이름과 검사종류, 내용을 비롯한 내용들이 DB에 저장됩니다.

**보완 및 추가사항**

- `dlg_start` → 정확히는 `uiDlgStart()` 함수로, 이 안에서 `uiDlgInit()`이 호출되어 모든 UI를 로드하고 초기화를 수행합니다.
    
- 시리얼 통신 설정은 `setSerialReadThread()`에서 시리얼 객체 초기화 및 읽기 스레드 연결을 수행하며, `write_data()` 함수로 쓰기를 수행합니다.
    
- 피검자 관리 UI 내에는 추가/삭제/검색 기능뿐 아니라, 실제 DB와 연동되어 암호화된 개인정보를 처리하는 과정이 포함됩니다(예: `dsTestDB.py` 내부 함수).
    
- 검사 메뉴에서는 역치(TH), 식별(DC), 인지(ID), 훈련(ST, ID 등) 기능이 있으나, 실제 UI에서는 **현재 인지 검사만 활성화** 상태이며, 다른 기능은 숨김 혹은 완성 전 상태입니다.
    
- 검사 중 발향 및 세정 명령은 내부적으로 Modbus 프로토콜 바이트 명령 생성 후 시리얼로 실제 장비에 전달됩니다.
    
- 검사 UI에는 타이머, 사운드 재생, ProgressBar 연동 등 상태 제어 로직이 포함되어 있어 **검사 진행 상황을 시각적/청각적으로 보조**합니다.
    
- 결과 화면에서는 엑셀파일 저장 기능과 함께, 검사 기록은 별도로 DB에 저장되어 차후 조회/분석이 가능합니다.




---

- **주요 화면(메인, 피검자 선택, 검사 종류, 검사 절차, 결과/완료)들은 어떤 Dialog(윈도우/창)와 함수로 분리 운용되는가?**
      ```text
      화면은 각각의 Dialog로 이루어져 있으며 주로 버튼에 connect된 함수를 실행함으로서 화면 ui를 교체 또는 팝업으로 띄워주는 형식으로 이루어져 있습니다.
      ```
### **보완 및 추가사항**

- UI 파일(.ui)을 `QUiLoader`로 로딩 후 변수에 담아 개별 창/다이얼로그를 관리합니다.  
    예로 `self.ui_main_dlg`, `self.ui_subject_dlg`, `self.ui_test_identification_response` 등으로 분리됨.
    
- 화면 전환은 `uiDlgChange(prev_dlg, next_dlg)`에서 이전 창을 숨기고 다음 창을 보여주며, 위치 조정을 같이 수행합니다.
    
- 팝업 윈도우는 `uiDlgShow(dlg)`를 통해 별도 창으로 띄우며 주로 모달 아니면 비모달로 열림.
    
- 각 다이얼로그 함수 내에서 위젯들의 Signal-Slot 연결도 일괄 처리됩니다.
    
- UI 이름과 함수명은 약어 규칙에 따라 `pb_`(버튼), `dlg`(다이얼로그), `exp`(체험화면) 등으로 일관되게 구성되어 있어 **유지보수가 용이**합니다.
    
- 신규 기능 UI 삽입 시에는 `.ui` 파일 추가 + `UiDlg` 클래스 내 초기화 함수와 시그널 연결 부분에 코드 추가 필요합니다.

---
- **화면 전환(`uiDlgChange`, `uiDlgShow` 등)은 실제로 어떤 객체 간에 어떻게 이루어지는지 설명할 수 있는가?**
- ```text
     uiloader로 불러온 ui들을 상황에 맞게 hide() 또는 show()를 사용해 현재 상황에 맞는 ui를 교체 또는 보여주는 식으로 이루어져있습니다.```

- #### **보완 및 추가사항**

- `uiDlgChange`는 **두 다이얼로그 간에 기존 화면은 숨기고**, 다음 화면을 보여주는 역할,  
    동시에 **화면 위치를 이전 다이얼로그 위치 중심으로 이동**시켜 사용자의 위치 감각 유지에 도움을 줍니다.
    
- `uiDlgShow`는 팝업 또는 단독 화면 띄울 때 사용하는 함수로, 위치 이동은 동일하지만 이전 다이얼로그는 숨기지 않습니다.
    
- 화면 전환은 비동기 이벤트(버튼 클릭 등)에서 호출돼 즉시 UI 변경 처리하며,  
    `uiDlgChangeWithDlg`처럼 팝업창 닫고 두 개창 교체하는 복합 흐름도 있습니다.
    
- **화면 전환 시점에 필요한 데이터 초기화나 리셋 함수도 함께 호출**해 반드시 각 화면 상태가 최신 유지되도록 설계되어 있습니다.```
---
## 2. **UI/이벤트 구조와 Signal-Slot 흐름**

- **각 버튼이나 입력창(예: pb_fr_01, pb_test 등)의 "이벤트"는 어떤 함수에 맵핑되어 있고, 이벤트-슬롯 연결 패턴은 어떻게 구성되어 있는가?**
- 
     각 버튼은 주로 이미지를 선택함으로서, 현재 사용자가 어떤 항목을 선택하였는지 쉽게 확인할 수 있도록 체크 이미지를 붙여주는 식으로 이미지 교체를 해주고, dsNum 파일에 현재 문항, 선택한 내용 등을 계속해서 할당해나가면서 피검자 정보 + 응답번호+정답유무 등을 묶어 DB에 저장합니다
#### **보완 및 추가사항**

- 버튼들은 `pb_` 접두사 함수명으로 이벤트 함수가 정의되고 [`widget_name.clicked.connect(pb_func)`] 형태로 연결됩니다.
    
- 버튼 클릭은 UI 내에서 체크 이미지(대체 이미지)로 시각적 상태 표현과 내부 상태 변수(예: `self.fr_num`, `dsNum` 라이브러리의 선택 번호 등)를 갱신합니다.
    
- 검사 응답 및 사용자 입력은 각 검사별로 문항별 답 선택, 정답 유무 판정, 시간 기록이 결합되어  
    DB에 삽입하기 전까지 임시 구조(`id_results` 리스트 또는 `th_results`)에 저장됩니다.
    
- Signal-Slot 연결은 UI 초기화 과정(`uiDlgXXX` 함수) 내에서 집중적으로 처리되어 코드를 한눈에 파악할 수 있습니다.
    
- 선택지 버튼은 보통 3~4개 정도이며, 클릭 시 가로채기, 로그 남기기, ProgressBar 진행 동기화 등과도 연결됩니다.
---

- **화면(다이얼로그)별로 변수 naming(특히 약어 pb, dlg, exp 등)의 의미와 일관성 있는 네이밍 규칙을 정확하게 이해하고 따라 쓸 수 있는가?**
- 
- 
    주로 쓰이는 약어인 pb는 Qpushbutton, dlg 는 dialog, exp는 실제 경험과 관련된 기능으로 네이밍을 이해하고 있습니다.

#### 추가 설명

- `fr` : Fragrance(향) 관련 항목/번호 등의 약어로 자주 사용
    
- `cb` : ComboBox
    
- `hs` : HorizontalSlider
    
- `te` : TextEdit
    
- `num` : 번호, 인덱스 변수 이름에 다수 활용
    
- 함수명은 동작 대상을 먼저, 이어서 역할·기능을 붙이는 조합형 명명법으로 일관성 유지
    
- UI 파일 이름과 Python 내 변수명이 1:1로 매칭돼 유지보수가 쉬움
---
- **신규 UI(예: ST 자가훈련, 프로토콜 테스트 등)를 추가/활성화/숨김 처리할 때 수정해야 하는 주요 위치는 어디인가?**
     신규 UI 자가훈련 같은 메인 기능과 관련된 기능은 메뉴화면에 배치를 해서 사용자가 원하는 검사를 진행할 수 있도록 도와주어야 하고, 프로토콜 테스트 같은 경우는 개발자가 시리얼 통신연결이 잘 되어있는지 등을 테스트하는 화면이기 때문에 특정 상황에서만 들어갈 수 있거나 버튼은 숨겨놓거나 해야합니다.
	
	## **작성하신 내용 수용 및 보완**

- 메인 메뉴 UI(`ui_menu.ui` 또는 `self.ui_menu_dlg`)에 검사/훈련 관련 버튼을 추가
    
- `UiDlg.uiDlgMenu()` 함수 내에서 해당 버튼 위젯 접근 및 시그널 연결 코드 추가
    
- 새 UI 다이얼로그는 `uiDlgInit()` 내부에서 QUiLoader로 로드 및 변수 할당 필요
    
- 기능 활성화 시 UI 리스트 혹은 메뉴 버튼 `setVisible(True)`로 화면에 노출
    
- 개발 전용 UI(프로토콜 테스트 등)는 주로 숨겨놓고 특정 접근 방법(관리자 메뉴, 단축키 등)으로 진입


|문항번호|보완 핵심 포인트|
|---|---|
|1|`uiDlgStart()` 내부 초기화 함수, 시리얼 설정 `setSerialReadThread()`, DB 연동 구체 확인|
|2|Dialog별 UI파일(.ui) 매칭, Signal-Slot 연결 일괄 처리, `uiDlgChange` 기반 화면전환 메커니즘|
|3|화면 전환 함수 위치 조정 원리(geometry, frameGeometry) 명확화, 팝업과 전환 차이 숙지|
|4|버튼 클릭 시 상태 변화(이미지 교체 및 변수 할당), 검사 진행 상태변수, `dsNum` 연계 등 내부 상태 관리 프로세스|
|5|주요 약어 추가(`fr`, `cb`, `hs`, `te`), 명명 규칙과 실제 예제(함수/변수) 이해 강화|
|6|신규 UI 활성화 시 QUiLoader 부분, 메뉴 함수 연결, UI 숨김/노출 처리, 개발용 UI 특징 구분|


## 3. **데이터 저장/불러오기(DB/암호화/복호화)**

- 인적 정보(이름/생년월일/성별 등)와 검사 결과(점수/문항/응답)는 어떤 DB 테이블(스키마)에 저장되고,  
    암호화/복호화는 어느 시점·함수에서 처리되는가?
    
- DB insert/select/update/delete 함수(`dsTestDB.py`의 각종 함수들)가 어떤 인자, 어떤 암호화 동작, 어떤 쿼리문법을 활용하는지 설명 가능한가?
    
- 인지검사, 역치/식별 검사 각각의 결과 저장 로직과 주 테이블 구조는 구두로 설명할 수 있는가?
    
- (암호화 방식 관련) dsCrypto.py에서 Fernet 기반으로 암호화·복호화가 어떻게 동작하며, 코드상 어디서 실제 사용되는가?
    

## 4. **시리얼(Serial)/하드웨어 연동 및 Modbus 동작**

- 하드웨어(발향기/센서)와 통신은 어떤 시리얼 인터페이스(RS-232/485 등)·포트 정보로 관리되며, 실제 코드 흐름에서 어떤 객체와 함수로 연결되는가?
    
- Modbus 패킷을 생성할 때 주요 함수(`sendMsgForEmitClean`, `sendMsgWriteSingleRegister` 등)와, 그에 넘기는 각종 인자(명령, 파라미터, CRC)는 어떤 규칙에 따라 만들고 전송하는가?
    
- 메시지 전송 후 read/write 함수와 콘솔 출력, 에러 처리의 연결 구조는 어떤가?
    
- 프로토콜 테스트(개발/점검용 관리자 UI)는 어디서, 어떤 용도로 진입하는가?
    

## 5. **각종 검사(역치, 식별, 인지, 자가훈련) 프로세스/로직 차이 이해**

- TH(역치), DC(식별), ID(인지), ST(자가훈련) 검사 종류별 UI동작·내부로직 차별 포인트(문항·절차·데이터·저장형식 등)를 설명할 수 있는가?
    
- 인지검사용 데이터(id_test_data), 결과(id_results) 및 응답 흐름(다음 문항, 결과 판정 등)을 구술로 따라 그릴 수 있나?
    
- ProgressBar, 타이머, 사운드 등 검사 보조 UI 요소의 시그널과 변수 연동은 어떻게 구성되어 있는가?
    
- 자가훈련(ST) 기능의 UI/DB 구조와, 미완성/비활성화 상태에서 활성화하려면 무엇을 바꿔야 하는가?
    
- 검사별(예: 인지 vs. 역치) UI와 이벤트/변수 연동 방법(예: pb_check_1~4 등)은 어떻게 다르고, 공통점은 뭔가?
    

## 6. **설정값, 사용자 환경, 로컬 세팅 관리**

- 프로그램 설정(dsSetting.dsParam) 값들은 어떻게 로드/저장되고, UI 컨트롤 변화에 변수가 동기화되는 구조는 어떤가?
    
- 검사 파라미터(발향 세기, 시간 등)는 어떤 위치/방식(dsSetting.py, UI slider 등)에서 제어 가능한가?
    

## 7. **네이밍 컨벤션/코드 작성 룰**

- 함수, 변수, 위젯 네이밍에서 `pb`, `dlg`, `exp`, `fr`, `cb`, `hs` 등 각종 약어가 무엇을 의미하며,  
    신규 함수/위젯 작성시 동일 룰을 따를 수 있는가?
    
- 내부적으로 **화면(다이얼로그) 단위로 모듈/함수 구조를 분할**하는 기준은 무엇인가?
    
- 각종 데이터(번호, 선택값 등) 변수의 suffix(num, index 등) 규칙이 일관된가?
    

## 8. **현장 실무/대화 준비용 심화 질문**

- 팀원이 “이 부분 버튼 추가·비활성화·화면전환 코드를 바로바로 손댈 수 있나?” 물었을 때 파일/함수 레벨에서 바로 근거를 말할 수 있나?
    
- “검사 결과가 이렇게 저장됐는데, DB에서 복호화해 바로 추출하는 코드를 쓸 수 있나?”
    
- “시리얼 메시지를 박스/다이어그램(예: [주소][함수][데이터][CRC])로 그려서 하드웨어 개발자에게 설명할 수 있나?”
    
- “네트워크/시리얼/이더넷/RS-485 차이·장단점은 제대로 설명 가능?”
    
- 실전에서 버그/에러가 났을 때 함수 추적, 값 확인, 출력창 활용까지 설명할 수 있는가?
    

## 📝 활용 안내

- 이 리스트의 **각 항목**을 자신만의 언어·예제로 1~2문장 답할 수 있으면 실무 대화, 고급 유지보수, 신규 UI 설계 등도 충분히 원활하게 할 수 있습니다.
    
- 본인이 약한 부분(예: 데이터 암호화플로우, 시리얼커넥션 등)은 다이어그램 그려보고 소스에 직접 주석 달며 확인하면 숙지가 더 빨라집니다.
    
- 실제 QA/회의/코드 리뷰 때 상대방 입장에서 “이 질문이 들어와도 바로 구두로 설명해줄 수 있나?”를 상상하며 연습해보세요.
    

