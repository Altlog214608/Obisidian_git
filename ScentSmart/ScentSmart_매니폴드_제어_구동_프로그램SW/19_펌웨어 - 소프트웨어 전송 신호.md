---
aliases:
  - 19_펌웨어 -> 소프트웨어 전송 신호
---
펌웨어(하드웨어 MCU)에서 소프트웨어(PC/ScentSmart 등)로 시리얼 신호(데이터 패킷)를 보내는 경우는 주로 "상태 보고", "명령 수행 결과", "버전/정보", "에러/이상신호" 등입니다. 대표적인 예시는 아래와 같습니다.

## 1. **명령에 대한 확인(ACK/Confirm) 신호**

- PC에서 발향, 세정, 정지, 상태요청 달라고 명령을 보냈을 때
    
- 펌웨어가 "명령을 정상적으로 받았다!"는 의미로
    
    - Confirm(‘C’), OK(‘O’, ‘K’) 패킷을 전송
        
    - 예: `'CO'`(Confirm OK)
        

## 2. **상태 응답(Status Response)**

- PC에서 상태 요청(‘G’ 명령, Get Status 등) 보내면
    
- 펌웨어가 현재 장비 상태 값(예: 각 향 채널 분사여부, 에러 상태, 밸브 상태 등)을 담은 패킷을 전송
    
    - 예: `[Address][G][상태1][상태2][상태3][상태4][체크섬][ETX]`
        
    - 보통 RunScentStatus 등 배열 값으로 송신
        

## 3. **버전 정보(Version Info)**

- PC가 버전 요청(‘V’) 명령 보내면
    
- 펌웨어가 자신의 펌웨어 버전(날짜/빌드/제품명 등 문자열) 송신
    

## 4. **명령 실행 결과(완료/실패)**

- 분사/세정/정지 명령을 받고 실행 완료 후,
    
- "정상 완료됨" 또는 "실패/에러(코드)" 등 결과를 PC에 패킷 형태로 송신
    

## 5. **에러/이상 상태 보고(Error/Alert)**

- 패킷이 잘못되거나 명령 실행 중 문제가 생긴 경우(잘못된 값, 체크섬 에러, 명령 불가 등)
    
- 에러 코드(예: 0x80+에러번호), 알람 정보 등을 포함하는 패킷을 즉각 송신
    
- 예: `"CRC error"`, `"COMMAND_ERROR"`, `"LENGTH_ERROR"` 등
    

## 6. **기타(센서 값, 실시간 알림 등)**

- 추가 기능이 있을 경우,
    
    - 센서 데이터(압력/온도 등) 실시간 보고
        
    - 장비 상태 알림(예: 뚜껑 열림, 안전 차단 등)
        
    - 유지/보수 목적의 테스트 신호 등
        

## **요약 표**

|펌웨어→SW로 보내는 신호|주요 예시/목적|
|---|---|
|명령 확인(Confirm, ACK)|명령 정상 수신/수행 여부 확인|
|상태 응답(Status)|향/밸브/펌프 등 현재 상태 보고|
|버전 정보(Version)|펌웨어 소프트웨어 버전 답변|
|명령 결과(실행 완료/실패)|분사 등 명령이 실제 실행됐는지/에러 발생 여부 전송|
|에러 코드(오류 보고)|패킷오류, 실행실패, 프로토콜 위반 등 알림|
|센서값/이벤트 보고|압력, 온도, 실시간 알람 등|

## **정리**

**펌웨어에서 SW로 신호를 보내는 것은 대부분**

- "명령을 잘 받았다",
    
- "이렇게 동작했다/상태가 이렇다",
    
- "이런 문제가 발생했다"  
    는 내용을 PC 소프트웨어에 알려주는 것이 핵심입니다.
    
