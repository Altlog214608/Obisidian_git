

---

```markdown
# 🧠 FrSmart 소프트웨어(FrSmart.py) 분석 계획

FrSmart는 디지털 향기 하드웨어와 인터페이스하는 **PySide6 기반 데스크탑 GUI 애플리케이션**입니다.  
본 문서는 FrSmart의 전체 구조, 주요 기능, 통신 및 로직 흐름 등을 체계적으로 분석하기 위한 단계별 계획입니다.

---

## 🎯 전체 목적 및 구성

- **주요 목적:**  
  FrSmart는 시리얼 통신을 통해 향 분사/세정/추천 기능을 제어하는 GUI 응용 프로그램입니다.

- **주요 기능:**  
  - 향기 분사/세정/테스트
  - 사용자 조건 기반 향 추천
  - 향 혼합(Mix) 기능
  - 설정값 제어 및 저장

---

## 🧱 분석 세부 계획

### 1. 🧭 아키텍처 개요 및 메인 컴포넌트 정리

- `UiDlg` 클래스 및 진입점 함수 구조 분석
- 주요 모듈 간 관계도 작성:
  - `dsSerial`, `dsComm`, `dsImage`, `dsSound`, `dsSetting` 등

---

### 2. 📡 시리얼 통신 로직 분석

- 포트 열기/닫기/재시도 로직
- 송수신 메시지 구조 파악 (e.g., `emit`, `clean`)
- 시리얼 이벤트 발생 → UI 반영 흐름 추적

---

### 3. 🎨 UI/UX 동작 및 화면 전환 분석

- 다이얼로그/메인화면 구조 및 전환 방식
- 주요 UI 흐름 정리:
  - 향 선택 → 분사
  - 조건 선택 → 추천 결과
  - 향 믹스 → 테스트/재분사

---

### 4. 🤖 추천 및 Mix 알고리즘 분석

- 사용자 입력값: 나이/성격/성별/가격대
- 결과 생성 흐름:
  - 추천 로직: `testModel` 호출 여부, 알고리즘 위치
  - 믹스 버튼 클릭 시 호출되는 로직 트레이싱

---

### 5. ⚙️ 설정 관리 및 파일 입출력

- 설정 저장/로드: JSON 구조
- 설정값이 내부 파라미터에 반영되는 방식
- UI ↔ 파일 ↔ 실행값 간 연결 흐름도 작성

---

### 6. 📦 외부 모듈/파일 역할 정리

| 모듈명        | 역할 요약                     |
|---------------|-------------------------------|
| `dsSerial`    | 시리얼 통신 관리              |
| `dsComm`      | 통신 명령 메시지 생성         |
| `dsImage`     | 향기 관련 이미지 처리         |
| `dsSound`     | 사운드 재생                   |
| `dsText`      | UI에 사용될 텍스트 리소스     |
| `dsStyle`     | 버튼/라벨 등 스타일 정의      |
| `dsNum`       | 숫자값 전역 설정              |
| `dsSetting`   | 설정 저장/불러오기            |
| `dsQRcode`    | QR 코드 생성 처리             |
| `testModel`   | 향 추천 알고리즘 추정 모듈     |

---

### 7. 🚨 특이사항 및 예외처리

- 배포용 vs 디버깅용 코드 여부
- 임시 플래그 / CES용 하드코딩 여부
- 다국어/다중테마/기기별 예외 대응 코드

---

### 8. 🧾 문서화 및 시각화

- 주요 시퀀스 다이어그램:
  - 시리얼 연결 → 향 분사 → 응답 수신
  - 추천 버튼 클릭 → testModel 호출 → 결과 표시
- 데이터 흐름도
- UI 전이 흐름도 (메인 → 추천 → 결과 → 재분사 등)

---

## 📋 실행계획 예시

1. **Entry-point 추적** → 클래스/함수 정리
2. **모듈/클래스/함수 단위 문서화** (`docstring` or 별도 파일)
3. **시리얼/추천 관련 흐름 별도 집중 분석**
4. **전체 요약 및 개선 포인트 정리 (옵션)**

---

## ✅ 활용 방안

- 유지보수/인수인계 문서 기반
- 리팩토링 전략 수립
- 추가 기능(향기 이력, 사용자 분석 등) 설계 기반 확보

---

```

