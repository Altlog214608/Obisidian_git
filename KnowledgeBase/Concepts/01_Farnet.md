

---

````md
# 🔐 Fernet 암호화란?

**Fernet**은 Python의 `cryptography` 패키지에서 제공하는  
**대칭키 기반 암호화 방식** 중 하나로,  
**안전하고 쉽게 쓸 수 있는 암호화 도구**입니다.

---

## 📌 1. Fernet의 핵심 개념

| 항목 | 설명 |
|------|------|
| 🔑 **방식** | 대칭키 (같은 키로 암호화 / 복호화) |
| 🔒 **암호화 알고리즘** | AES-128 (CBC 모드) |
| 🛡️ **무결성 검증** | HMAC-SHA256 사용 |
| 📦 **암호문 포맷** | URL-safe base64 문자열 |
| 🕒 **타임스탬프 포함** | 메시지 생성 시간 기록 (선택적 만료 TTL 가능) |

---

## 🧪 2. 간단한 예시 코드

```python
from cryptography.fernet import Fernet

# 🔐 1. 키 생성
key = Fernet.generate_key()
cipher = Fernet(key)

# 🔏 2. 암호화
token = cipher.encrypt(b"hello world")
print(token)  # b'gAAAAABk...'

# 🔓 3. 복호화
original = cipher.decrypt(token)
print(original)  # b'hello world'
````

---

## 🧱 3. Fernet 암호문의 구조

Fernet은 암호문을 다음과 같은 구조로 구성합니다:

```
[버전(1)] + [타임스탬프(8)] + [IV(16)] + [암호문(n)] + [HMAC-SHA256(32)]
```

|구성 요소|설명|
|---|---|
|Version (1B)|버전 정보 (현재는 0x80)|
|Timestamp (8B)|암호화 시각 (Unix 시간)|
|IV (16B)|랜덤 초기화 벡터|
|Ciphertext|실제 암호화된 데이터|
|HMAC (32B)|무결성 검증용 서명 (SHA256)|

---

## 🧠 4. 대칭키란?

- **하나의 키로 암호화와 복호화 둘 다 가능**
    
- 이 키는 노출되지 않도록 안전하게 저장해야 함 (예: .env, OS keyring 등)
    

---

## 🧱 5. 실전에서 사용되는 곳

- 사용자 정보 암호화 (이름, 생년월일 등)
    
- 웹 인증 토큰 (단기 저장용)
    
- DB에 저장할 민감 정보 (패스워드 제외)
    

> 🔸 비밀번호 저장에는 해시(예: `bcrypt`)를 사용하고  
> 🔸 Fernet은 **복호화가 필요한 데이터**에 적합합니다.

---

## ⚠️ 6. 주의사항

- 키가 노출되면 암호문 복호화도 가능해지므로 **보안 관리 철저**
    
- Fernet은 **대용량 데이터에는 적합하지 않음** (메모리 기반)
    
- 복호화 실패 시 `InvalidToken` 예외 발생
    

---

## ✅ 7. Fernet vs 다른 암호화

|항목|Fernet|RSA|bcrypt|
|---|---|---|---|
|암호화 방식|대칭|비대칭|해시|
|복호화 가능?|✅|✅|❌|
|주 사용처|민감데이터|키 교환, 서명|비밀번호 저장|
|속도|빠름|느림|중간|

---

## 📌 요약

> **Fernet = 쉽고 안전한 암호화 포맷**  
> → 짧은 문자열 데이터 암호화/복호화에 적합  
> → AES-128 + HMAC-SHA256 기반  
> → 키는 반드시 안전하게 관리해야 함

---
